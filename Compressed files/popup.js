document.addEventListener("DOMContentLoaded",()=>{initializeTable(),document.getElementById("creditDiv").insertAdjacentHTML("beforeend",`<p>(Version: ${chrome.runtime.getManifest().version})</p>`)});const initializeTable=()=>{const a=document.getElementById("tcpacDisplayDiv");a.innerHTML="",a.insertAdjacentHTML("afterbegin",`<table><tr id="tcpacTableRow0"><th>${chrome.i18n.getMessage("channel")}</th><th>${chrome.i18n.getMessage("claimedcount")}</th><th>${chrome.i18n.getMessage("clearrecord")}</th></tr></table>`),chrome.storage.local.get("tcpacObj",b=>{let c=b.tcpacObj??{},d=document.getElementById("tcpacTableRow0");if(0<Object.keys(c).length)for(var e in c)d.insertAdjacentHTML("afterend",`<tr id='tcpacTableRow${e}'><td><a id='tcpacTableKey${e}' href='https://www.twitch.tv/${e}' target='_blank'>${e}</a></td><td>${c[e]} (${50*c[e]})</td><td><button class='tcpacDelBtn' id='tcpacDelBtn${e}'>${chrome.i18n.getMessage("clear")}</button></td></tr>`),d=document.getElementById("tcpacTableRow"+e);else d.insertAdjacentHTML("afterend",`<tr id='tcpacTableRow1'><td>N/A</td><td>N/A</td><td>N/A</td></tr>`),d=document.getElementById("tcpacTableRow1");d.insertAdjacentHTML("afterend",`<tr id='tcpacTableRowLast'><td></td><td></td><td><button  class='tcpacDelBtn' id='tcpacResetBtn'>${chrome.i18n.getMessage("clearall")}</button></td></tr>`),a.addEventListener("click",delFunction=b=>"BUTTON"===b.toElement.nodeName?"tcpacResetBtn"===b.target.id?chrome.storage.local.remove("tcpacObj",()=>{a.removeEventListener("click",delFunction),initializeTable()}):void chrome.storage.local.get("tcpacObj",c=>{let d=c.tcpacObj;delete d[b.target.id.substring(11)],chrome.storage.local.set({tcpacObj:d},()=>{a.removeEventListener("click",delFunction),initializeTable()})}):void 0)})};